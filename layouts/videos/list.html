{{ define "head" }}
<meta name="description" content="{{ .Title }} of {{ .Site.Title }}">
<link rel="stylesheet" href="{{ .Site.Params.staticPath }}/css/list.css" media="all">
{{ end }}

{{ define "title" }}
{{.Title }} | {{ .Site.Title }}
{{ end }}

{{ define "main" }}
<div class="container pt-5" id="list-page">
    <h2 class="text-center pb-2">{{.Title}}</h2>
    <div class="row">
        {{ range .Paginator.Pages }}
        <div class="col-lg-4 col-md-6 my-3">
            <div class="card-columns">
                <div class="card h-100">
                    {{/* Determine whether this page is a video */}}
                    {{ $isYouTube := .Params.youtube_id }}
                    {{ $isVideoURL := .Params.video_url }}
                    {{ $hasImage := .Params.image }}
                    {{ $showFeatured := not (.Site.Params.listPages.disableFeaturedImage | default false) }}

                    {{ if and $showFeatured (or $isYouTube $isVideoURL $hasImage) }}
                    <div class="card-header position-relative">
                        <a href="{{ .RelPermalink }}">
                            {{ if $isYouTube }}
                                <!-- YouTube thumbnail -->
                                <img src="https://img.youtube.com/vi/{{ $isYouTube }}/hqdefault.jpg" class="card-img-top" alt="{{ .Title }}">
                            {{ else if $hasImage }}
                                <img src="{{ .Params.image }}" class="card-img-top" alt="{{ .Title }}">
                            {{ else if $isVideoURL }}
                                <!-- Generic video: if user provided a poster/thumbnail param, it will be used; else fallback to image placeholder -->
                                {{ if .Params.video_poster }}
                                    <img src="{{ .Params.video_poster }}" class="card-img-top" alt="{{ .Title }}">
                                {{ else }}
                                    <img src="{{ .Site.Params.staticPath }}/images/video-placeholder.png" class="card-img-top" alt="{{ .Title }}">
                                {{ end }}
                            {{ end }}
                            {{/* Play overlay for video types */}}
                            {{ if or $isYouTube $isVideoURL }}
                            <span class="play-overlay" aria-hidden="true">
                                <!-- simple play icon -->
                                <svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="play-icon">
                                    <path d="M5 3v18l15-9L5 3z" fill="currentColor"/>
                                </svg>
                            </span>
                            {{ end }}
                        </a>
                    </div>
                    {{ end }}

                    <div class="card-body bg-transparent p-4 shadow-sm">
                        <a href="{{ .RelPermalink }}" class="primary-font card-title">
                            <h5 class="card-title bg-transparent" title="{{ .Title }}">{{ .Title | truncate 25 }}</h5>
                        </a>
                        <div class="card-text secondary-font">
                            {{/* Prefer explicit description for videos, else use Summary */}}
                            {{ if $isYouTube }}
                                {{ with .Params.video_description }}<p>{{ . | truncate 300 }}</p>{{ else }}<p>{{ .Summary | truncate 300 }}</p>{{ end }}
                            {{ else if $isVideoURL }}
                                {{ with .Params.video_description }}<p>{{ . | truncate 300 }}</p>{{ else }}<p>{{ .Summary | truncate 300 }}</p>{{ end }}
                            {{ else }}
                                <p>{{ .Summary | truncate 300 }}</p>
                            {{ end }}
                        </div>
                    </div>

                    <div class="mt-auto post-footer bg-transparent py-3">
                        <span class="float-start bg-transparent">{{ .Date.Format (.Site.Params.datesFormat.articleList | default "January 2, 2006") }}</span>
                        {{/* Keep same Read button â€” you may change label for videos via params if you want */}}
                        <a href="{{ .RelPermalink }}" class="float-end btn btn-outline-info btn-sm">
                            {{ if or $isYouTube $isVideoURL }}
                                {{ .Site.Params.terms.watch | default "Watch" }}
                            {{ else }}
                                {{ .Site.Params.terms.read | default "Read" }}
                            {{ end }}
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {{ end }}

        <div class="row justify-content-center">
            <div class="col-auto m-3">
                {{ template "_internal/pagination.html" . }}
            </div>
        </div>
    </div>
</div>
{{ end }}
